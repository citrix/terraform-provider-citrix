---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "citrix_image_version Resource - citrix"
subcategory: "CVAD"
description: |-
  Manages an image version. Note that this feature is in Tech Preview.
---

# citrix_image_version (Resource)

Manages an image version. **Note that this feature is in Tech Preview.**

## Example Usage

```terraform
resource "citrix_image_version" "example_azure_image_version" {
    image_definition = citrix_image_definition.example_image_definition.id
	hypervisor = citrix_azure_hypervisor.example_azure_hypervisor.id   
	hypervisor_resource_pool = citrix_azure_hypervisor_resource_pool.example_azure_resource_pool.id   
	description = "example description"

	azure_image_specs = {
		service_offering = "Standard_B2als_v2"
		storage_type = "StandardSSD_LRS"
		resource_group = "example_resource_group"
        // Only one of master_image and gallery_image can be specified
		master_image = "example_master_image"
        # gallery_image = {
        #     gallery    = var.azure_gallery_name
        #     definition = var.azure_gallery_image_definition
        #     version    = var.azure_gallery_image_version
        # }

        // Optional attributes
		license_type = "Windows_Client"
        shared_subscription = var.azure_image_subscription
        machine_profile = {
            machine_profile_resource_group = var.machine_profile_resource_group

            // Only one of machine_profile_vm_name and machine_profile_template_spec properties can be used
            machine_profile_vm_name = var.machine_profile_vm_name
            # machine_profile_template_spec_name = var.machine_profile_template_spec_name
            # machine_profile_template_spec_version = var.machine_profile_template_spec_version
        }
        disk_encryption_set = {
            disk_encryption_set_name           = var.disk_encryption_set_name
            disk_encryption_set_resource_group = var.disk_encryption_set_resource_group
        }
	}
}

resource "citrix_image_version" "example_vsphere_image_version" {
    image_definition = citrix_image_definition.example_image_definition.id
	hypervisor = citrix_vsphere_hypervisor.example_vsphere_hypervisor.id   
	hypervisor_resource_pool = citrix_vsphere_hypervisor_resource_pool.example_vsphere_resource_pool.id   
	description = "example vSphere image version description"

	vsphere_image_specs = {
        master_image_vm = "example_master_image_vm"
        image_snapshot = "snaphost-1/snapshot-2/snapshot-3"
		cpu_count = 2
		memory_mb = 4096
        // Optional attributes
		// machine_profile = "machine_profile_template_name"
	}
}

resource "citrix_image_version" "example_workspaces_core_image_version" {
    image_definition = citrix_image_definition.example_workspaces_core_image_definition.id
	hypervisor = citrix_amazon_workspaces_core_hypervisor.example-amazon-workspaces-core-hypervisor.id
	hypervisor_resource_pool = citrix_amazon_workspaces_core_hypervisor_resource_pool.example-amazon-workspaces-core-hypervisor-resource-pool.id
	description = "Example image version for Amazon WorkSpaces Core"

	amazon_workspaces_core_image_specs = {
        service_offering = "T3 Medium Instance"
        master_image = "example_master_image"
        image_ami = "ami-00000000000000000"
        machine_profile = {
            vm_name = "example_vm_name"
            vm_region_az = "us-east-1a"
            vm_id = "i-0000000000000000"
        }
	}
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `hypervisor` (String) Id of the hypervisor to use for creating this image version.
- `hypervisor_resource_pool` (String) Id of the hypervisor resource pool to use for creating this image version.
- `image_definition` (String) Id of the image definition to associate this image version with.

### Optional

- `amazon_workspaces_core_image_specs` (Attributes) Image configuration for Amazon Workspaces Core image version. (see [below for nested schema](#nestedatt--amazon_workspaces_core_image_specs))
- `azure_image_specs` (Attributes) Image configuration for Azure image version. (see [below for nested schema](#nestedatt--azure_image_specs))
- `description` (String) Description of the image version.
- `network_mapping` (Attributes List) Specifies how the attached NICs are mapped to networks. (see [below for nested schema](#nestedatt--network_mapping))
- `timeout` (Attributes) Timeout in minutes for the long-running jobs in image version resource's create, delete operation(s). (see [below for nested schema](#nestedatt--timeout))
- `vsphere_image_specs` (Attributes) Image configuration for vSphere image version. (see [below for nested schema](#nestedatt--vsphere_image_specs))

### Read-Only

- `id` (String) The id of the image version.
- `os_type` (String) The OS type of the image version.
- `session_support` (String) Session support for the image version.
- `version_number` (Number) The version number of the image version.

<a id="nestedatt--amazon_workspaces_core_image_specs"></a>
### Nested Schema for `amazon_workspaces_core_image_specs`

Required:

- `image_ami` (String) AMI of the AWS image to be used as the template image for the machine catalog.
- `machine_profile` (Attributes) The name of the virtual machine that will be used to identify the default value for the tags, virtual machine size, boot diagnostics, host cache property of OS disk, accelerated networking and availability zone.<br />While providing machine profile, specify either `vm_name + vm_region_az + vm_id` or `launch_template_name + launch_template_version + launch_template_id`, but not both. (see [below for nested schema](#nestedatt--amazon_workspaces_core_image_specs--machine_profile))
- `master_image` (String) The name of the virtual machine image that will be used.
- `service_offering` (String) The AWS VM Sku to use when creating machines.

<a id="nestedatt--amazon_workspaces_core_image_specs--machine_profile"></a>
### Nested Schema for `amazon_workspaces_core_image_specs.machine_profile`

Optional:

- `launch_template_id` (String) The launch template ID of the machine profile.
- `launch_template_name` (String) The launch template name of the machine profile.
- `launch_template_version` (String) The launch template version of the machine profile.
- `vm_id` (String) The instance ID of the machine profile virtual machine.
- `vm_name` (String) The name of the machine profile virtual machine.
- `vm_region_az` (String) The region and availability zone of the machine profile virtual machine.



<a id="nestedatt--azure_image_specs"></a>
### Nested Schema for `azure_image_specs`

Required:

- `resource_group` (String) The Azure Resource Group where the managed disk / snapshot for creating machines is located.
- `service_offering` (String) The Azure VM Sku to use when creating machines.
- `storage_type` (String) Storage account type used for provisioned virtual machine disks on Azure. Storage types include: `Standard_LRS`, `StandardSSD_LRS` and `Premium_LRS`.

Optional:

- `disk_encryption_set` (Attributes) The configuration for Disk Encryption Set (DES). The DES must be in the same subscription and region as your resources. If your master image is encrypted with a DES, use the same DES when creating this machine catalog. When using a DES, if you later disable the key with which the corresponding DES is associated in Azure, you can no longer power on the machines in this catalog or add machines to it. (see [below for nested schema](#nestedatt--azure_image_specs--disk_encryption_set))
- `gallery_image` (Attributes) Details of the Azure Image Gallery image to use for creating machines. Only Applicable to Azure Image Gallery image. (see [below for nested schema](#nestedatt--azure_image_specs--gallery_image))
- `license_type` (String) Windows license type used to provision virtual machines in Azure at the base compute rate. License types include: `Windows_Client` and `Windows_Server`.
- `machine_profile` (Attributes) The name of the virtual machine or template spec that will be used to identify the default value for the tags, virtual machine size, boot diagnostics, host cache property of OS disk, accelerated networking and availability zone.<br />Required when provisioning_type is set to PVSStreaming or when identity_type is set to `AzureAD` (see [below for nested schema](#nestedatt--azure_image_specs--machine_profile))
- `master_image` (String) The name of the virtual machine snapshot or VM template that will be used. This identifies the hard disk to be used and the default values for the memory and processors. Omit this field if you want to use gallery_image.
- `shared_subscription` (String) The Azure Subscription ID where the managed disk / snapshot for creating machines is located. Only required if the image is not in the same subscription of the hypervisor.

<a id="nestedatt--azure_image_specs--disk_encryption_set"></a>
### Nested Schema for `azure_image_specs.disk_encryption_set`

Required:

- `disk_encryption_set_name` (String) The name of the disk encryption set.
- `disk_encryption_set_resource_group` (String) The name of the resource group in which the disk encryption set resides.


<a id="nestedatt--azure_image_specs--gallery_image"></a>
### Nested Schema for `azure_image_specs.gallery_image`

Required:

- `definition` (String) The image definition for the image to be used in the Azure Image Gallery. Only applicable to Azure Image Gallery image.
- `gallery` (String) The Azure Image Gallery where the image for creating machines is located. Only applicable to Azure Image Gallery image.
- `version` (String) The image version for the image to be used in the Azure Image Gallery. Only applicable to Azure Image Gallery image.


<a id="nestedatt--azure_image_specs--machine_profile"></a>
### Nested Schema for `azure_image_specs.machine_profile`

Required:

- `machine_profile_resource_group` (String) The name of the resource group where the machine profile VM or template spec is located.

Optional:

- `machine_profile_template_spec_name` (String) The name of the machine profile template spec.
- `machine_profile_template_spec_version` (String) The version of the machine profile template spec.
- `machine_profile_vm_name` (String) The name of the machine profile virtual machine.



<a id="nestedatt--network_mapping"></a>
### Nested Schema for `network_mapping`

Required:

- `network` (String) The name of the virtual network that the device should be attached to. This must be a subnet within a Virtual Private Cloud item in the resource pool to which the Machine Catalog is associated.<br />For AWS, please specify the network mask of the network you want to use within the VPC.
- `network_device` (String) Name or Id of the network device.


<a id="nestedatt--timeout"></a>
### Nested Schema for `timeout`

Optional:

- `create` (Number) Timeout in minutes for the long-running jobs in create operation. Defaults to 30. Minimum value is 5.
- `delete` (Number) Timeout in minutes for the long-running jobs in delete operation. Defaults to 10. Minimum value is 5.


<a id="nestedatt--vsphere_image_specs"></a>
### Nested Schema for `vsphere_image_specs`

Required:

- `cpu_count` (Number) The number of processors that virtual machines created from the provisioning scheme should use.
- `image_snapshot` (String) The Snapshot of the virtual machine specified in `master_image_vm`. Specify the relative path of the snapshot. Eg: snaphost-1/snapshot-2/snapshot-3. This property is case sensitive.
- `master_image_vm` (String) The name of the virtual machine that will be used as master image. This property is case sensitive.
- `memory_mb` (Number) The maximum amount of memory that virtual machines created from the provisioning scheme should use.

Optional:

- `machine_profile` (String) The name of the virtual machine template that will be used to identify the default value for the tags, virtual machine size, boot diagnostics and host cache property of OS disk.

Read-Only:

- `disk_size` (Number) The size of the disk in GB.

## Import

Import is supported using the following syntax:

```shell
# Image Version can be imported with the format ImageDefinitionId,ImageVersionId
terraform import citrix_image_version.example_image_version 86a00c8a-504c-4a85-9d5d-bce4d5876a72,fb8cc891-c6c8-4c26-be52-1734d4ef1207
```