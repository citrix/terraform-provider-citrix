---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "citrix_machine_catalog Resource - citrix"
subcategory: ""
description: |-
  Manages a machine catalog.
---

# citrix_machine_catalog (Resource)

Manages a machine catalog.

## Example Usage

```terraform
resource "citrix_machine_catalog" "example-azure-mtsession" {
	name                		= "example-azure-mtsession"
	description					= "Example multi-session catalog on Azure hypervisor"
	zone						= "<zone Id>"
	allocation_type				= "Random"
	session_support				= "MultiSession"
	is_power_managed			= true
	is_remote_pc 			  	= false
	provisioning_type 			= "MCS"
	provisioning_scheme			= 	{
		hypervisor = citrix_azure_hypervisor.example-azure-hypervisor.id
		hypervisor_resource_pool = citrix_hypervisor_resource_pool.example-azure-hypervisor-resource-pool.id
		identity_type      = "ActiveDirectory"
		machine_domain_identity = {
            domain                   = "<DomainFQDN>"
			domain_ou				 = "<DomainOU>"
            service_account          = "<Admin Username>"
            service_account_password = "<Admin Password>"
        }
		azure_machine_config = {
			storage_type = "Standard_LRS"
			use_managed_disks = true
            service_offering = "Standard_D2_v2"
            resource_group = "<Azure resource group name for image vhd>"
            storage_account = "<Azure storage account name for image vhd>"
            container = "<Azure storage container for image vhd>"
            master_image = "<Image vhd blob name>"
			writeback_cache = {
				wbc_disk_storage_type = "pd-standard"
				persist_wbc = true
				persist_os_disk = true
				persist_vm = true
				writeback_cache_disk_size_gb = 127
				storage_cost_saving = true
			}
        }
		network_mapping = {
            network_device = "0"
            network = "<Azure Subnet for machine>"
        }
		availability_zones = "1,2,..."
		number_of_total_machines = 	1
		machine_account_creation_rules ={
			naming_scheme =     "az-multi-##"
			naming_scheme_type ="Numeric"
		}
	}
}

resource "citrix_machine_catalog" "example-gcp-mtsession" {
    name                        = "example-gcp-mtsession"
    description                 = "Example multi-session catalog on GCP hypervisor"
   	zone						= "<zone Id>"
	allocation_type				= "Random"
	session_support				= "MultiSession"
	is_power_managed			= true
	is_remote_pc 			  	= false
	provisioning_type 			= "MCS"
    provisioning_scheme         = {
		hypervisor = citrix_gcp_hypervisor.example-gcp-hypervisor.id
		hypervisor_resource_pool = citrix_hypervisor_resource_pool.example-gcp-hypervisor-resource-pool.id
		identity_type      = "ActiveDirectory"
		machine_domain_identity = {
            domain                   = "<DomainFQDN>"
			domain_ou				 = "<DomainOU>"
            service_account          = "<Admin Username>"
            service_account_password = "<Admin Password>"
        }
        gcp_machine_config = {
            
            machine_profile = "<Machine profile template VM name>"
            master_image = "<Image template VM name>"
            machine_snapshot = "<Image template VM snapshot name>"
			storage_type = "pd-standard"
			writeback_cache = {
				wbc_disk_storage_type = "pd-standard"
				persist_wbc = true
				persist_os_disk = true
				writeback_cache_disk_size_gb = 127
			}
        }
		availability_zones = "{project name}:{region}:{availability zone1},{project name}:{region}:{availability zone2},..."
        number_of_total_machines = 1
        machine_account_creation_rules = {
            naming_scheme = "gcp-multi-##"
            naming_scheme_type = "Numeric"
        }
    }
}

resource "citrix_machine_catalog" "example-manual-power-managed-mtsession" {
	name                		= "example-manual-power-managed-mtsession"
	description					= "Example manual power managed multi-session catalog"
	zone						= "<zone Id>"
	allocation_type				= "Random"
	session_support				= "MultiSession"
	is_power_managed			= true
	is_remote_pc 			  	= false
	provisioning_type 			= "Manual"
	machine_accounts = [
        {
            hypervisor = citrix_azure_hypervisor.example-azure-hypervisor.id
            machines = [
                {
                    region = "East US"
                    resource_group_name = "machine-resource-group-name"
                    machine_name = "Domain\\MachineName"
                }
            ]
        }
    ]
}

resource "citrix_machine_catalog" "example-manual-non-power-managed-mtsession" {
	name                		= "example-manual-non-power-managed-mtsession"
	description					= "Example manual non power managed multi-session catalog"
	zone						= "<zone Id>"
	allocation_type				= "Random"
	session_support				= "MultiSession"
	is_power_managed			= false
	is_remote_pc 			  	= false
	provisioning_type 			= "Manual"
	machine_accounts = [
        {
            machines = [
                {
                    machine_name = "Domain\\MachineName1"
                },
				{
                    machine_name = "Domain\\MachineName2"
                }
            ]
        }
    ]
}

resource "citrix_machine_catalog" "example-remote-pc" {
	name                		= "example-remote-pc-catalog"
	description					= "Example Remote PC catalog"
	zone						= "<zone Id>"
	allocation_type				= "Static"
	session_support				= "SingleSession"
	is_power_managed			= false
	is_remote_pc 			  	= true
	provisioning_type 			= "Manual"
	machine_accounts = [
        {
            machines = [
                {
                    machine_name = "Domain\\MachineName1"
                },
				{
                    machine_name = "Domain\\MachineName2"
                }
            ]
        }
    ]
	remote_pc_ous = [
        {
            include_subfolders = false
            ou_name = "OU=Example OU,DC=domain,DC=com"
        }
    ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `allocation_type` (String) Denotes how the machines in the catalog are allocated to a user. Choose between `Static` and `Random`.
- `name` (String) Name of the machine catalog.
- `provisioning_type` (String) Specifies how the machines are provisioned in the catalog.
- `session_support` (String) Session support type. Choose between `SingleSession` and `MultiSession`. Session support should be SingleSession when `is_remote_pc = true`
- `zone` (String) Id of the zone the machine catalog is associated with.

### Optional

- `description` (String) Description of the machine catalog.
- `is_power_managed` (Boolean) Specify if the machines in the machine catalog will be power managed.
- `is_remote_pc` (Boolean) Specify if this catalog is for Remote PC access.
- `machine_accounts` (Attributes List) List of machine accounts to add to the catalog. Only to be used when using `provisioning_type = MANUAL` (see [below for nested schema](#nestedatt--machine_accounts))
- `provisioning_scheme` (Attributes) Machine catalog provisioning scheme. Required when `provisioning_type = MCS` (see [below for nested schema](#nestedatt--provisioning_scheme))
- `remote_pc_ous` (Attributes List) Organizational Units to be included in the Remote PC machine catalog. Only to be used when `is_remote_pc = true`. For adding machines, use `machine_accounts`. (see [below for nested schema](#nestedatt--remote_pc_ous))
- `vda_upgrade_type` (String) Type of Vda Upgrade. Choose between LTSR and CR. When omitted, Vda Upgrade is disabled.

### Read-Only

- `id` (String) GUID identifier of the machine catalog.

<a id="nestedatt--machine_accounts"></a>
### Nested Schema for `machine_accounts`

Required:

- `machines` (Attributes List) List of machines (see [below for nested schema](#nestedatt--machine_accounts--machines))

Optional:

- `hypervisor` (String) The Id of the hypervisor in which the machines reside. Required only if `is_power_managed = true`

<a id="nestedatt--machine_accounts--machines"></a>
### Nested Schema for `machine_accounts.machines`

Required:

- `machine_account` (String) The Computer AD Account for the machine. Must be in the format DOMAIN\MACHINE.

Optional:

- `availability_zone` (String) **[AWS: Required]** The availability zone in which the machine resides. Required only if `is_power_managed = true`
- `cluster` (String) **[VSphere: Optional]** The cluster in which the machine resides. To be used only if `is_power_managed = true`
- `datacenter` (String) **[VSphere: Required]** The datacenter in which the machine resides. Required only if `is_power_managed = true`
- `host` (String) **[VSphere: Required]** The IP address or FQDN of the host in which the machine resides. Required only if `is_power_managed = true`
- `machine_name` (String) The name of the machine. Required only if `is_power_managed = true`
- `project_name` (String) **[GCP: Required]** The project name in which the machine resides. Required only if `is_power_managed = true`
- `region` (String) **[Azure, GCP: Required]** The region in which the machine resides. Required only if `is_power_managed = true`
- `resource_group_name` (String) **[Azure: Required]** The resource group in which the machine resides. Required only if `is_power_managed = true`



<a id="nestedatt--provisioning_scheme"></a>
### Nested Schema for `provisioning_scheme`

Required:

- `hypervisor` (String) Id of the hypervisor for creating the machines. Required only if using power managed machines.
- `hypervisor_resource_pool` (String) Id of the hypervisor resource pool that will be used for provisioning operations.
- `identity_type` (String) The identity type of the machines to be created. Supported values are`ActiveDirectory`, `AzureAD`, and `HybridAzureAD`.
- `machine_account_creation_rules` (Attributes) Rules specifying how Active Directory machine accounts should be created when machines are provisioned. (see [below for nested schema](#nestedatt--provisioning_scheme--machine_account_creation_rules))
- `number_of_total_machines` (Number) Number of VDA machines allocated in the catalog.

Optional:

- `availability_zones` (String) The Availability Zones for provisioning virtual machines. Use a comma as a delimiter for multiple availability_zones.
- `aws_machine_config` (Attributes) Machine Configuration For AWS EC2 MCS catalog. (see [below for nested schema](#nestedatt--provisioning_scheme--aws_machine_config))
- `azure_machine_config` (Attributes) Machine Configuration For Azure MCS catalog. (see [below for nested schema](#nestedatt--provisioning_scheme--azure_machine_config))
- `gcp_machine_config` (Attributes) Machine Configuration For GCP MCS catalog. (see [below for nested schema](#nestedatt--provisioning_scheme--gcp_machine_config))
- `machine_domain_identity` (Attributes) The domain identity for machines in the machine catalog.<br />Required when identity_type is set to `ActiveDirectory` (see [below for nested schema](#nestedatt--provisioning_scheme--machine_domain_identity))
- `network_mapping` (Attributes) Specifies how the attached NICs are mapped to networks. If this parameter is omitted, provisioned VMs are created with a single NIC, which is mapped to the default network in the hypervisor resource pool.  If this parameter is supplied, machines are created with the number of NICs specified in the map, and each NIC is attached to the specified network.<br />Required when `provisioning_scheme.identity_type` is `AzureAD`. (see [below for nested schema](#nestedatt--provisioning_scheme--network_mapping))

<a id="nestedatt--provisioning_scheme--machine_account_creation_rules"></a>
### Nested Schema for `provisioning_scheme.machine_account_creation_rules`

Required:

- `naming_scheme` (String) Defines the template name for AD accounts created in the identity pool.
- `naming_scheme_type` (String) Type of naming scheme. This defines the format of the variable part of the AD account names that will be created. Choose between `Numeric`, `Alphabetic` and `Unicode`.


<a id="nestedatt--provisioning_scheme--aws_machine_config"></a>
### Nested Schema for `provisioning_scheme.aws_machine_config`

Required:

- `image_ami` (String) AMI of the AWS image to be used as the template image for the machine catalog.
- `master_image` (String) The name of the virtual machine image that will be used.
- `service_offering` (String) The AWS VM Sku to use when creating machines.


<a id="nestedatt--provisioning_scheme--azure_machine_config"></a>
### Nested Schema for `provisioning_scheme.azure_machine_config`

Required:

- `resource_group` (String) The Azure Resource Group where the image VHD / managed disk / snapshot for creating machines is located.
- `service_offering` (String) The Azure VM Sku to use when creating machines.
- `storage_type` (String) Storage account type used for provisioned virtual machine disks on Azure. Storage types include: `Standard_LRS`, `StandardSSD_LRS` and `Premium_LRS`.

Optional:

- `container` (String) The Azure Storage Account Container where the image VHD for creating machines is located. Only applicable to Azure VHD image blob.
- `gallery_image` (Attributes) Details of the Azure Image Gallery image to use for creating machines. Only Applicable to Azure Image Gallery image. (see [below for nested schema](#nestedatt--provisioning_scheme--azure_machine_config--gallery_image))
- `machine_profile` (Attributes) The name of the virtual machine template that will be used to identify the default value for the tags, virtual machine size, boot diagnostics, host cache property of OS disk, accelerated networking and availability zone.<br />Required when identity_type is set to `AzureAD` (see [below for nested schema](#nestedatt--provisioning_scheme--azure_machine_config--machine_profile))
- `master_image` (String) The name of the virtual machine snapshot or VM template that will be used. This identifies the hard disk to be used and the default values for the memory and processors. Omit this field if you want to use gallery_image.
- `storage_account` (String) The Azure Storage Account where the image VHD for creating machines is located. Only applicable to Azure VHD image blob.
- `use_managed_disks` (Boolean) Indicate whether to use Azure managed disks for the provisioned virtual machine.
- `vda_resource_group` (String) Designated resource group where the VDA VMs will be located on Azure.
- `writeback_cache` (Attributes) Write-back Cache config. Leave this empty to disable Write-back Cache. Write-back Cache requires Machine image with Write-back Cache plugin installed. (see [below for nested schema](#nestedatt--provisioning_scheme--azure_machine_config--writeback_cache))

<a id="nestedatt--provisioning_scheme--azure_machine_config--gallery_image"></a>
### Nested Schema for `provisioning_scheme.azure_machine_config.gallery_image`

Required:

- `definition` (String) The image definition for the image to be used in the Azure Image Gallery. Only applicable to Azure Image Gallery image.
- `gallery` (String) The Azure Image Gallery where the image for creating machines is located. Only applicable to Azure Image Gallery image.
- `version` (String) The image version for the image to be used in the Azure Image Gallery. Only applicable to Azure Image Gallery image.


<a id="nestedatt--provisioning_scheme--azure_machine_config--machine_profile"></a>
### Nested Schema for `provisioning_scheme.azure_machine_config.machine_profile`

Required:

- `machine_profile_resource_group` (String) The resource group name where machine profile VM is located in.
- `machine_profile_vm_name` (String) The name of the machine profile virtual machine.


<a id="nestedatt--provisioning_scheme--azure_machine_config--writeback_cache"></a>
### Nested Schema for `provisioning_scheme.azure_machine_config.writeback_cache`

Required:

- `persist_os_disk` (Boolean) Persist the OS disk when power cycling the non-persistent provisioned virtual machine.
- `persist_vm` (Boolean) Persist the non-persistent provisioned virtual machine in Azure environments when power cycling. This property only applies when the PersistOsDisk property is set to True.
- `persist_wbc` (Boolean) Persist Write-back Cache
- `storage_cost_saving` (Boolean) Save storage cost by downgrading the storage type of the disk to Standard HDD when VM shut down.
- `wbc_disk_storage_type` (String) Type of naming scheme. Choose between Numeric and Alphabetic.
- `writeback_cache_disk_size_gb` (Number) The size in GB of any temporary storage disk used by the write back cache.

Optional:

- `writeback_cache_memory_size_mb` (Number) The size of the in-memory write back cache in MB.



<a id="nestedatt--provisioning_scheme--gcp_machine_config"></a>
### Nested Schema for `provisioning_scheme.gcp_machine_config`

Required:

- `master_image` (String) The name of the virtual machine snapshot or VM template that will be used. This identifies the hard disk to be used and the default values for the memory and processors.
- `storage_type` (String) Storage type used for provisioned virtual machine disks on GCP. Storage types include: `pd-standar`, `pd-balanced`, `pd-ssd` and `pd-extreme`.

Optional:

- `machine_profile` (String) The name of the virtual machine template that will be used to identify the default value for the tags, virtual machine size, boot diagnostics, host cache property of OS disk, accelerated networking and availability zone. If not specified, the VM specified in master_image will be used as template.
- `machine_snapshot` (String) The name of the virtual machine snapshot of a GCP VM that will be used as master image.
- `writeback_cache` (Attributes) Write-back Cache config. Leave this empty to disable Write-back Cache. (see [below for nested schema](#nestedatt--provisioning_scheme--gcp_machine_config--writeback_cache))

<a id="nestedatt--provisioning_scheme--gcp_machine_config--writeback_cache"></a>
### Nested Schema for `provisioning_scheme.gcp_machine_config.writeback_cache`

Required:

- `persist_os_disk` (Boolean) Persist the OS disk when power cycling the non-persistent provisioned virtual machine.
- `persist_wbc` (Boolean) Persist Write-back Cache
- `wbc_disk_storage_type` (String) Type of naming scheme. Choose between Numeric and Alphabetic.
- `writeback_cache_disk_size_gb` (Number) The size in GB of any temporary storage disk used by the write back cache.

Optional:

- `writeback_cache_memory_size_mb` (Number) The size of the in-memory write back cache in MB.

Read-Only:

- `persist_vm` (Boolean) Not supported for GCP.
- `storage_cost_saving` (Boolean) Not supported for GCP.



<a id="nestedatt--provisioning_scheme--machine_domain_identity"></a>
### Nested Schema for `provisioning_scheme.machine_domain_identity`

Required:

- `domain` (String) The AD domain name for the pool. Specify this in FQDN format; for example, MyDomain.com.
- `service_account` (String) Service account for the domain. Only the username is required; do not include the domain name.
- `service_account_password` (String, Sensitive) Service account password for the domain.

Optional:

- `domain_ou` (String) The organization unit that computer accounts will be created into.


<a id="nestedatt--provisioning_scheme--network_mapping"></a>
### Nested Schema for `provisioning_scheme.network_mapping`

Required:

- `network` (String) The name of the virtual network that the device should be attached to. This must be a subnet within a Virtual Private Cloud item in the resource pool to which the Machine Catalog is associated.<br />For AWS, please specify the network mask of the network you want to use within the VPC.
- `network_device` (String) Name or Id of the network device.



<a id="nestedatt--remote_pc_ous"></a>
### Nested Schema for `remote_pc_ous`

Required:

- `include_subfolders` (Boolean) Specify if subfolders should be included.
- `ou_name` (String) Name of the OU.

## Import

Import is supported using the following syntax:

```shell
# Machine catalog can be imported by specifying the GUID
terraform import citrix_machine_catalog.example b2339edf-7b00-436e-9c3a-54c987c3526e
```
