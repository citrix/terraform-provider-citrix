---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "citrix_daas_machine_catalog Resource - citrix"
subcategory: ""
description: |-
  Manages a machine catalog.
---

# citrix_daas_machine_catalog (Resource)

Manages a machine catalog.

## Example Usage

```terraform
resource "citrix_daas_machine_catalog" "example-azure-mtsession" {
	name                		= "example-azure-mtsession"
	description					= "Example multi-session catalog on Azure hypervisor"
	zone						= "{zone Id}"
	service_account				= "{domain-admin-account}"
	service_account_password 	= "{domain-admin-password}"
	allocation_type				= "Random"
	session_support				= "MultiSession"
	provisioning_scheme			= 	{
		machine_config = {
            hypervisor = citrix_daas_hypervisor.example-azure-hypervisor.id
			hypervisor_resource_pool = citrix_daas_hypervisor_resource_pool.example-azure-hypervisor-resource-pool.id
            service_offering = "Standard_D2_v2"
            resource_group = "{Azure resource group name for image vhd}"
            storage_account = "{Azure storage account name for image vhd}"
            container = "{Azure storage container for image vhd}"
            master_image = "{Image vhd blob name}"
        }
		network_mapping = {
            network_device = "0"
            network = "{Azure Subnet for machine}"
        }
		number_of_total_machines = 	1
		machine_account_creation_rules ={
			naming_scheme =     "az-multi-##"
			naming_scheme_type ="Numeric"
			domain =            "{domain-fqdn}"
		}
		os_type = "Windows"
		storage_type = "Standard_LRS"
		use_managed_disks = true
		writeback_cache = {
			wbc_disk_storage_type = "Standard_LRS"
			persist_wbc = true
			persist_os_disk = true
			persist_vm = true
			writeback_cache_disk_size_gb = 127
			storage_cost_saving = true
		}
	}
}

resource "citrix_daas_machine_catalog" "example-gcp-mtsession" {
    name                        = "example-gcp-mtsession"
    description                 = "Example multi-session catalog on GCP hypervisor"
   	zone						= "{zone Id}"
	service_account				= "{domain-admin-account}"
	service_account_password 	= "{domain-admin-password}"
	allocation_type				= "Random"
	session_support				= "MultiSession"
    provisioning_scheme         = {
        storage_type = "pd-standard"
        availability_zones = "{project name}:{region}:{availability zone1},{project name}:{region}:{availability zone2},..."
        machine_config = {
            hypervisor = citrix_daas_hypervisor.example-gcp-hypervisor.id
            hypervisor_resource_pool = citrix_daas_hypervisor_resource_pool.example-gcp-hypervisor-resource-pool.id
            machine_profile = "{Machine profile template VM name}"
            master_image = "{Image template VM name}"
            machine_snapshot = "{Image template VM snapshot name}"
        }
        number_of_total_machines = 1
        machine_account_creation_rules = {
            naming_scheme = "gcp-multi-##"
            naming_scheme_type = "Numeric"
            domain = "serenity.local"
        }
		writeback_cache = {
			wbc_disk_storage_type = "Standard_LRS"
			persist_wbc = true
			persist_os_disk = true
			persist_vm = true
			writeback_cache_disk_size_gb = 127
			storage_cost_saving = true
		}
    }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `allocation_type` (String) Denotes how the machines in the catalog are allocated to a user. Choose between `Static` and `Random`.
- `name` (String) Name of the machine catalog.
- `provisioning_scheme` (Attributes) Machine catalog provisioning scheme. (see [below for nested schema](#nestedatt--provisioning_scheme))
- `service_account` (String) Service account for the domain.
- `service_account_password` (String, Sensitive) Service account password for the domain.
- `session_support` (String) Session support type. Choose between `SingleSession` and `MultiSession`.
- `zone` (String) Id of the zone the machine catalog is associated with.

### Optional

- `description` (String) Description of the machine catalog.
- `vda_upgrade_type` (String) Type of Vda Upgrade. Choose between LTSR and CR

### Read-Only

- `id` (String) GUID identifier of the machine catalog.

<a id="nestedatt--provisioning_scheme"></a>
### Nested Schema for `provisioning_scheme`

Required:

- `machine_account_creation_rules` (Attributes) Rules specifying how Active Directory machine accounts should be created when machines are provisioned. (see [below for nested schema](#nestedatt--provisioning_scheme--machine_account_creation_rules))
- `machine_config` (Attributes) Machine Configuration (see [below for nested schema](#nestedatt--provisioning_scheme--machine_config))
- `number_of_total_machines` (Number) Number of VDA machines allocated in the catalog.

Optional:

- `availability_zones` (String) The Azure Availability Zones containing provisioned virtual machines. Use a comma as a delimiter for multiple availability_zones.
- `network_mapping` (Attributes) Specifies how the attached NICs are mapped to networks.  If this parameter is omitted, provisioned VMs are created with a single NIC, which is mapped to the default network in the hypervisor resource pool.  If this parameter is supplied, machines are created with the number of NICs specified in the map, and each NIC is attached to the specified network. (see [below for nested schema](#nestedatt--provisioning_scheme--network_mapping))
- `storage_type` (String) **[Azure, GCP: Required]** Storage account type used for provisioned virtual machine disks on Azure / GCP.<br />Azure storage types include: `Standard_LRS`, `StandardSSD_LRS` and `Premium_LRS`.<br />GCP storage types include: `pd-standar`, `pd-balanced`, `pd-ssd` and `pd-extreme`.
- `use_managed_disks` (Boolean) **[Azure: Optional]** Indicate whether to use Azure managed disks for the provisioned virtual machine.
- `vda_resource_group` (String) **[Azure: Optional]** Designated resource group where the VDA VMs will be located on Azure.
- `writeback_cache` (Attributes) Write-back Cache config. Leave this empty to disable Write-back Cache. (see [below for nested schema](#nestedatt--provisioning_scheme--writeback_cache))

<a id="nestedatt--provisioning_scheme--machine_account_creation_rules"></a>
### Nested Schema for `provisioning_scheme.machine_account_creation_rules`

Required:

- `domain` (String) The AD domain name for the pool. Specify this in FQDN format; for example, MyDomain.com.
- `naming_scheme` (String) Defines the template name for AD accounts created in the identity pool.
- `naming_scheme_type` (String) Type of naming scheme. This defines the format of the variable part of the AD account names that will be created. Choose between `Numeric`, `Alphabetic` and `Unicode`.

Optional:

- `domain_ou` (String) The organization unit that computer accounts will be created into.


<a id="nestedatt--provisioning_scheme--machine_config"></a>
### Nested Schema for `provisioning_scheme.machine_config`

Required:

- `hypervisor` (String) Id of the hypervisor for creating the machines.
- `hypervisor_resource_pool` (String) Id of the hypervisor resource pool that will be used for provisioning operations.
- `master_image` (String) The name of the virtual machine snapshot or VM template that will be used. This identifies the hard disk to be used and the default values for the memory and processors.

Optional:

- `container` (String) **[Azure: Optional]** The Azure Storage Account Container where the image VHD for creating machines is located. Only applicable to Azure VHD image blob.
- `gallery_image` (Attributes) **[Azure: Optional]** Details of the Azure Image Gallery image to use for creating machines. Only Applicable to Azure Image Gallery image. (see [below for nested schema](#nestedatt--provisioning_scheme--machine_config--gallery_image))
- `image_ami` (String) **[AWS: Required]** AMI of the AWS image to be used as the template image for the machine catalog.
- `machine_profile` (String) **[GCP: Optional]** The name of the virtual machine template that will be used to identify the default value for the tags, virtual machine size, boot diagnostics, host cache property of OS disk, accelerated networking and availability zone. If not specified, the VM specified in master_image will be used as template.
- `machine_snapshot` (String) **[GCP: Optional]** The name of the virtual machine snapshot of a GCP VM that will be used as master image.
- `resource_group` (String) **[Azure: Required]** The Azure Resource Group where the image VHD for creating machines is located.
- `service_offering` (String) **[Azure, AWS: Required]** The VM Sku of a Cloud service offering to use when creating machines.
- `storage_account` (String) **[Azure: Optional]** The Azure Storage Account where the image VHD for creating machines is located. Only applicable to Azure VHD image blob.

<a id="nestedatt--provisioning_scheme--machine_config--gallery_image"></a>
### Nested Schema for `provisioning_scheme.machine_config.gallery_image`

Required:

- `definition` (String) The image definition for the image to be used in the Azure Image Gallery. Only applicable to Azure Image Gallery image.
- `gallery` (String) The Azure Image Gallery where the image for creating machines is located. Only applicable to Azure Image Gallery image.
- `version` (String) The image version for the image to be used in the Azure Image Gallery. Only applicable to Azure Image Gallery image.



<a id="nestedatt--provisioning_scheme--network_mapping"></a>
### Nested Schema for `provisioning_scheme.network_mapping`

Required:

- `network` (String) The name of the virtual network that the device should be attached to. This must be a subnet within a Virtual Private Cloud item in the resource pool to which the Machine Catalog is associated.<br />For AWS, please specify the network mask of the network you want to use within the VPC.
- `network_device` (String) Name or Id of the network device.


<a id="nestedatt--provisioning_scheme--writeback_cache"></a>
### Nested Schema for `provisioning_scheme.writeback_cache`

Required:

- `persist_os_disk` (Boolean) Persist the OS disk when power cycling the non-persistent provisioned virtual machine.
- `persist_vm` (Boolean) Persist the non-persistent provisioned virtual machine in Azure environments when power cycling. This property only applies when the PersistOsDisk property is set to True.
- `persist_wbc` (Boolean) Persist Write-back Cache
- `storage_cost_saving` (Boolean) Save storage cost by downgrading the storage type of the disk to Standard HDD when VM shut down.
- `wbc_disk_storage_type` (String) Type of naming scheme. Choose between Numeric and Alphabetic.
- `writeback_cache_disk_size_gb` (Number) The size in GB of any temporary storage disk used by the write back cache.

Optional:

- `writeback_cache_memory_size_mb` (Number) The size of the in-memory write back cache in MB.

## Import

Import is supported using the following syntax:

```shell
# Machine catalog can be imported by specifying the GUID
terraform import citrix_daas_machine_catalog.example b2339edf-7b00-436e-9c3a-54c987c3526e
```
